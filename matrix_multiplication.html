<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<!-- Begin Header -->
<head>
  <title class="highlight">Linear Algebra in a Browser</title>
  <link rel='stylesheet' href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css"/>
  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="styles.css">
  <link href="themes/prism.css" rel="stylesheet" />
</head>
<!-- End Header -->

<!-- Begin Body -->
<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <a class="navbar-brand">Visualize Linear Algebra</a>
        <ul class="nav navbar-nav nav-pills" role="tablist">
          <li><a href="home.html">Home</a></li>
          <li class="active"><a href="matrix_multiplication.html">Multiplication</a></li>
          <li><a href="rref.html">RREF</a></li>
          <li><a href="inverse.html">Inverse</a></li>
          <li><a href="determinant.html">Determinant</a></li>
          <!-- <li><a href="eigen.html">Eigen-@#$*</a></li> -->
        </ul> <!-- end main menu -->
      </div> <!-- end navbar container -->
    </nav>
    <h1  class='text-center '>Matrix Multiplication</h1>

  <div class="container">
    <div class="row">
      <!--_____________________________Matrix 0__________________________________-->
        <div class="col-md-3">
          <div id='mat0'></div>
          <div class="input-group">
            <span class="input-group-addon">
              <input class="cols-md-1 form-control"
                     id="rowsA"
                     type="number"
                     aria-label="input for rowsA"
                     value="4"
                     min="1"
										 placeholder="rows">
            </span>

            <span class="input-group-addon">
              <input class="col-xs-1 form-control"
                     id="colsA"
                     type="number"
                     value="4"
                     min="1"
                     aria-label="input for colsA"
										 placeholder="cols">
            </span>
          </div><!-- end the input group -->
        </div> <!--end col-md-3 -->

<!--_____________________________Matrix 1__________________________________-->
				<div class="col-md-3">
          <div id='mat1'></div>
					<div class="input-group">
						<span class="input-group-addon">
							<input class="col-xs-1 form-control"
										 id="rowsB"
										 type="number"
										 aria-label="input for rowsB"
                     value="4"
                     min="1"
										 placeholder="rows">
						</span>

						<span class="input-group-addon">
							<input class="col-xs-1 form-control"
										 id="colsB"
										 type="number"
										 aria-label="input for colsB"
                     value="4"
                     min="1"
										 placeholder="cols">
						</span>


					</div><!-- end the input group -->
				</div> <!-- end col-md-3 -->

<!--_____________________________Matrix C__________________________________-->
				<div class="col-md-3">
          <div id='matC'></div>
  				<div class="input-group">
            <span class="input-group-addon">
              <button id="create_matrix_button" class="btn" type="button" aria-label="input for m">Generate</button>
            </span>
  					<span class="input-group-addon">
  						<button id = 'multiply_button' type='button' class="btn">Multiply</button>
  					</span>
  					<span class="input-group-addon">
  						<button type='button' class="btn btn-default" onclick="step(mat0, mat1, matC)">Next Step</button>
  					</span>
  					<!-- <span class="input-group-addon">
  						<button type='submit' class="btn btn-secondary">Reset Page</button>
  					</span> -->
  				</div> <!-- end dimension input row-->
      </div>
    </div>

      <div style="display:table-cell; padding:25px;">
        <p id='cellA'></p>
        <p id='cellB'></p>
        <p id='cellC'></p>
      </div>

      <table>
        <tbody>
          <tr><td id='istep'><td id='jstep'><td id='kstep'>
        </tbody>
      </table>


    <pre>
      <code class="language-python">
            <p>for i in range(len(matrixA)):<br>
            &emsp;for j in range(len(matrixB[0]])):<br>
            &emsp;&emsp;total = 0<br>
            &emsp;&emsp;for k in range(len(matrixB)):<br>
            &emsp;&emsp;&emsp;total += matrixA[i][k]*matrixB[k][j]<br>
            &emsp;matrixC[i][j] = s</p>
        </code>
    </pre><!-- end code -->
    <div style="padding:50px">
    <h3 class='text-center'>The code block that started everything.</h3>
    <p>I should make a few notes about Python programming. </p>
      <p>A matrix declared in Python looks like this: <code class='language-python'>a = [[1,2,3,4],[3,4,5,6],[5,6,7,8]]
</code></p><p>&emsp;Note the brackets. 'a' is a list of three things, and those three things
 are lists of four things. This effectively gives us a 3-row x 4-column matrix.</p>
      <p>In the first line: <code class='language-python'>
        for i in range(len(matrixA))</code></p>
        <p>&emsp;This gives us the range (0,3] because the list 'a' contains 3 elements and,
        I don't care what mathematicians say, counting starts at 0. And we have
      something called 'i' which keeps track of our progress through that range as we run this loop.</p>
      <p>In the second line: <code class='language-python'>range(len(matrixB[0]))</code></p>
      <p>&emsp;This gives the range (0,4] because we are asking for the length of the 0th element of the matrix
        which, in our example, is a list containing four things.</p>
        <p>The 5th line contains the <code class='language-python'>+=</code> operator and <code class='language-python'> x[y][z]</code> notation</p>
        <p>&emsp;<code class='language-python'>a += b</code>&emsp; is the same as &emsp;<code class='language-python'>a = a+b</code></p>
        <p>&emsp;The brackets, as a means of indexing, can be stacked so: <code class='language-python'>x[y][z]</code> returns the
          'z'th element of the 'y'th element of x. For our purposes, this can more appropriately
        be read as an address like: matrix  x, row y, column z.</p>
        <br>
        <p>&emsp;The code is otherwise pretty straightforward. For every row in the first
          matrix, we will go through every column in the second, but for every column in the second
          we get to something interesting. The numbers being multiplied no matter from what row in
          matrixA or column in matrixB must be in the same column of matrixA as row in matrixB. Since
          I have lazily coded this example to take the number of columns from matrixA as the value for
          'k' in the code above, you can see what happens when the matrices are not compatible.</p>
      </div>
  </div> <!-- end of container -->

<script>

var create_matrix_button = document.getElementById("create_matrix_button");
var multiply_button = document.getElementById("multiply_button");


create_matrix_button.addEventListener("click", function(e) {
  var arow = document.getElementById('rowsA').value;
  var acol = document.getElementById('colsA').value;
  var brow = document.getElementById('rowsB').value;
  var bcol = document.getElementById('colsB').value;
  m = matrix();
  m.random_int_mat(arow, acol,0,9);
  n = matrix();
  n.random_int_mat(brow, bcol,0,9);
  m.tobrowser("mat0", "Matrix A");
  n.tobrowser("mat1", "Matrix B");
  m.print();
  n.print();
  console.log("Howdy! ", e);
}, false);

multiply_button.addEventListener('click', function(e){
  var m = matrix();
  m.from_html_table('mat0');
  var n = matrix();
  n.from_html_table('mat1');
  // m.print();
  // n.print();
  p = multiply(m,n);
  // console.log('aloha', m,n);
  // p.print();
  p.tobrowser('matC','Matrix C');
}, false);

var i_step = -1;
var j_step = -1;
var k_step = 0;
var i_last = 0;
var j_last = 0;
var k_last = 0;

var axb = '';
var sum = 0;
function step(a, b, c){
  var mat0 = a;
  var mat1 = b;
  var matC = c;
  var cellAIK = '';
  var cellBKJ = '';
  var aik = '';
  var bkj = '';
  var cij = '';
  var row = document.getElementById('rowsA').value;
  var col = document.getElementById('colsB').value;
  var k = document.getElementById('colsA').value;
console.log(mat0body.rows[0].cells[0]);
  if (i_step < row){
    k_step = (k_step%k);
    if (j_step == col){
      j_step = j_step%col;
    }
    if (i_step >= 0){
      document.getElementById('mat0body').rows[i_last].cells[k_last].className = 'highlight_none';
    }
    document.getElementById('kstep').innerHTML = 'k: '+(k_step+1) ;
    if (j_step >= 0){
      j_last > col ? j_last = col : j_last = j_step;
      document.getElementById('mat1body').rows[k_last].cells[j_last].className = 'highlight_none';
    }
    if (k_step >=0){
      document.getElementById('matCbody').rows[i_last].cells[j_last].className = 'highlight_none';
    }
    if (k_step%k == 0){
      j_step = (j_step%col);
      j_step++;
      axb = '';
      sum = 0;
      // j_last > col ? j_last = col : j_last = j_step;
      j_step = (j_step%col);

      document.getElementById('jstep').innerHTML = 'j: '+(j_step+1);
    }
    if (j_step%col == 0 && k_step%k == 0){
      i_step++;
      document.getElementById('istep').innerHTML = 'i: '+(i_step+1);
    }
    document.getElementById('mat0body').rows[i_step].cells[k_step].className = 'highlight_y';
    document.getElementById('mat1body').rows[k_step].cells[j_step].className = 'highlight_g';
    document.getElementById('matCbody').rows[i_step].cells[j_step].className = 'highlight_b';
    k_last > k ? k_last = k-1 : k_last = k_step;
    k_step++;
    cellAIK = document.getElementById('mat0body').rows[i_step].cells[(k_step)-1].innerHTML;
    cellBKJ = document.getElementById('mat1body').rows[(k_step)-1].cells[j_step].innerHTML;
    if (k_step >1 && k_step < col+1){
      axb += '+'
    }
    axb += '('+cellAIK+'*'+cellBKJ+')'
    sum += parseInt(cellAIK)*parseInt(cellBKJ);
    aik += 'A('+(i_step+1)+','+k_step+')='+cellAIK;
    bkj += 'B('+k_step+','+(j_step+1)+')='+cellBKJ;
    cij += 'C('+(i_step+1)+','+(j_step+1)+')='+axb+'='+sum;
    document.getElementById('cellA').innerHTML = aik;
    document.getElementById('cellB').innerHTML = bkj;
    document.getElementById('cellC').innerHTML = cij;

  }
  i_last = i_step;
}


</script>
</body>

<!-- Begin Javascript -->
<script src="themes/prism.js"></script>

<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script src='mat.js'></script>
<!-- End Javascript -->
